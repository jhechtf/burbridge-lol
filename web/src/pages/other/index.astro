---
import { listOthers } from '$lib/other';
import { getAllTagsForType } from '$lib/tags';
import { getPayloadInstance } from '$lib/util';
import Main from '../../layouts/main.astro';

const payload = await getPayloadInstance();
const others = await payload.find({
  collection: 'others',
  limit: 100,
  sort: '-updatedAt',
  draft: import.meta.env.DEV,
})

---
<Main title="Other Pieces">
  <div class="p-4 col-span-12 @lg/main:col-span-6 @lg/main:col-start-3 space-y-4">
    <h1 class="mt-4 col-span-12">Other stories</h1>
    <p class="lead">
      Sometimes I write things that aren't exactly blogs or stories. This is
      where those pieces will live.
    </p>
    {
      others.docs.length === 0 && (
        <div>No other pieces exist at this moment in time</div>
      )
    }
    {
      others.docs.length > 0 && (
        <div class="space-y-5">
          {others.docs.map((other) => (
            <h3 class="bg-slate-800 p-4 rounded-md">
              <a href={`/other/${other.slug}`}>
                {other.title}
              </a>
            </h3>
          ))}
        </div>
      )
    }

  </div>
  <aside class="p-4 @lg/main:col-span-2 @lg/main:pl-8">
    <h3 class="mt-8 mb-4">
      By Tags
    </h3>

    <div class="flex justify-start flex-wrap gap-2">
      {
        // othersByTag.length > 0 
        //   ? othersByTag.map(tag => (
        //     <div class="pill bg-sky-700 px-3 py-1 rounded-full">
        //       {tag.display}
        //     </div>
        //   ))
        //   : (<p>No Tags yet</p>)
      }
      No tags right now.
    </div>
  </aside>
</Main>
